<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yingjun.ssm.dao.RegisterCompanyDao">
    <!-- RegisterCompany的resultMap,column是给数据库列起的别名,它对应property类的属性-->
    <resultMap id="result_RegisterCompany_Map" type="com.yingjun.ssm.entity.RegisterCompany">
        <id column="id" property="id" />
        <result column="company_type" property="companyType" />
        <result column="hasDirectorate" property="hasDirectorate" />
        <result column="secretary_approve_user_id" property="secretaryApproveUserId" />
        <result column="approve_status" property="approveStatus" />
        <result column="register_amount" property="registerAmount" />
        <result column="remark" property="remark" />
        <result column="employed_people" property="employedPeople" />
        <result column="business_year" property="businessYear" />
        <result column="company_address_id" property="companyAddressId" />
        <result column="partner_count" property="partnerCount" />
        <result column="pay_status" property="payStatus" />
        <result column="update_time" property="updateTime" />
        <result column="vendor_service_area_id" property="vendorServiceAreaId" />
        <result column="company_business_id" property="companyBusinessId" />
        <result column="operator_approve_user_name" property="operatorApproveUserName" />
        <result column="company_id" property="companyId" />
        <result column="partner_years" property="partnerYears" />
        <result column="create_time" property="createTime" />
        <result column="register_finish_time" property="registerFinishTime" />
        <result column="operator_approve_time" property="operatorApproveTime" />
        <result column="invest_condition" property="investCondition" />
        <result column="user_id" property="userId" />
        <result column="company_name" property="companyName" />
        <result column="vendor_id" property="vendorId" />
        <result column="max_partner_count" property="maxPartnerCount" />
        <result column="operator_approve_user_id" property="operatorApproveUserId" />
        <result column="order_id" property="orderId" />
        <result column="secretary_approve_user_name" property="secretaryApproveUserName" />
        <result column="secretary_approve_time" property="secretaryApproveTime" />
    </resultMap>

    <!-- 数据库中表名为:t_register_company的列名,as前是数据库的列明,as后是列的别名用于映射成实体类中的属性,需要注意的是别名必须与resultMap中的column别名一致 -->
    <sql id="t_register_company_Column">
        t_register_company.id as id
        ,t_register_company.company_type as company_type
        ,t_register_company.hasDirectorate as hasDirectorate
        ,t_register_company.secretary_approve_user_id as secretary_approve_user_id
        ,t_register_company.approve_status as approve_status
        ,t_register_company.register_amount as register_amount
        ,t_register_company.remark as remark
        ,t_register_company.employed_people as employed_people
        ,t_register_company.business_year as business_year
        ,t_register_company.company_address_id as company_address_id
        ,t_register_company.partner_count as partner_count
        ,t_register_company.pay_status as pay_status
        ,t_register_company.update_time as update_time
        ,t_register_company.vendor_service_area_id as vendor_service_area_id
        ,t_register_company.company_business_id as company_business_id
        ,t_register_company.operator_approve_user_name as operator_approve_user_name
        ,t_register_company.company_id as company_id
        ,t_register_company.partner_years as partner_years
        ,t_register_company.create_time as create_time
        ,t_register_company.register_finish_time as register_finish_time
        ,t_register_company.operator_approve_time as operator_approve_time
        ,t_register_company.invest_condition as invest_condition
        ,t_register_company.user_id as user_id
        ,t_register_company.company_name as company_name
        ,t_register_company.vendor_id as vendor_id
        ,t_register_company.max_partner_count as max_partner_count
        ,t_register_company.operator_approve_user_id as operator_approve_user_id
        ,t_register_company.order_id as order_id
        ,t_register_company.secretary_approve_user_name as secretary_approve_user_name
        ,t_register_company.secretary_approve_time as secretary_approve_time
    </sql>

    <!--获得类名为:RegisterCompany对应的数据库表的数据总行数 -->
    <select id="getRegisterCompanyRowCount" resultType="java.lang.Long">
        select count(id) from t_register_company
    </select>
    <!-- 获得类名为:RegisterCompany对应数据库中表的数据集合 -->
    <select id="selectRegisterCompany" resultMap="result_RegisterCompany_Map">
        select 
        <include refid="t_register_company_Column" /> 
        from t_register_company
    </select> 

    <!-- 获得一个RegisterCompany对象,以参数RegisterCompany对象中不为空的属性作为条件进行查询-->
    <select id="selectRegisterCompanyByObj" parameterType="com.yingjun.ssm.entity.RegisterCompany" resultMap="result_RegisterCompany_Map">
        select 
            <include refid="t_register_company_Column" /> 
        from t_register_company
        <where>
            <if test="secretaryApproveTime != null "> and t_register_company.secretary_approve_time = #{secretaryApproveTime}</if>
            <if test="secretaryApproveUserName != null "> and t_register_company.secretary_approve_user_name = #{secretaryApproveUserName}</if>
            <if test="orderId != null "> and t_register_company.order_id = #{orderId}</if>
            <if test="operatorApproveUserId != null "> and t_register_company.operator_approve_user_id = #{operatorApproveUserId}</if>
            <if test="maxPartnerCount != null "> and t_register_company.max_partner_count = #{maxPartnerCount}</if>
            <if test="vendorId != null "> and t_register_company.vendor_id = #{vendorId}</if>
            <if test="companyName != null "> and t_register_company.company_name = #{companyName}</if>
            <if test="userId != null "> and t_register_company.user_id = #{userId}</if>
            <if test="investCondition != null "> and t_register_company.invest_condition = #{investCondition}</if>
            <if test="operatorApproveTime != null "> and t_register_company.operator_approve_time = #{operatorApproveTime}</if>
            <if test="registerFinishTime != null "> and t_register_company.register_finish_time = #{registerFinishTime}</if>
            <if test="createTime != null "> and t_register_company.create_time = #{createTime}</if>
            <if test="partnerYears != null "> and t_register_company.partner_years = #{partnerYears}</if>
            <if test="companyId != null "> and t_register_company.company_id = #{companyId}</if>
            <if test="operatorApproveUserName != null "> and t_register_company.operator_approve_user_name = #{operatorApproveUserName}</if>
            <if test="companyBusinessId != null "> and t_register_company.company_business_id = #{companyBusinessId}</if>
            <if test="vendorServiceAreaId != null "> and t_register_company.vendor_service_area_id = #{vendorServiceAreaId}</if>
            <if test="updateTime != null "> and t_register_company.update_time = #{updateTime}</if>
            <if test="payStatus != null "> and t_register_company.pay_status = #{payStatus}</if>
            <if test="partnerCount != null "> and t_register_company.partner_count = #{partnerCount}</if>
            <if test="companyAddressId != null "> and t_register_company.company_address_id = #{companyAddressId}</if>
            <if test="businessYear != null "> and t_register_company.business_year = #{businessYear}</if>
            <if test="employedPeople != null "> and t_register_company.employed_people = #{employedPeople}</if>
            <if test="remark != null "> and t_register_company.remark = #{remark}</if>
            <if test="registerAmount != null "> and t_register_company.register_amount = #{registerAmount}</if>
            <if test="approveStatus != null "> and t_register_company.approve_status = #{approveStatus}</if>
            <if test="secretaryApproveUserId != null "> and t_register_company.secretary_approve_user_id = #{secretaryApproveUserId}</if>
            <if test="hasDirectorate != null "> and t_register_company.hasDirectorate = #{hasDirectorate}</if>
            <if test="companyType != null "> and t_register_company.company_type = #{companyType}</if>
            <if test="id != null "> and t_register_company.id = #{id}</if>
        </where>
    </select> 

    <!-- 通过RegisterCompany的id获得对应数据库中表的数据对象-->
    <select id="selectRegisterCompanyById" parameterType="java.lang.Long" resultMap="result_RegisterCompany_Map">
        select 
            <include refid="t_register_company_Column" /> 
        from t_register_company
        where t_register_company.id = #{id}
    </select> 

    <!-- 将RegisterCompany插入到对应数据库的表中,包括属性值为null的数据-->

    <insert id="insertRegisterCompany" parameterType="com.yingjun.ssm.entity.RegisterCompany">
        insert into t_register_company(id,company_type,hasDirectorate,secretary_approve_user_id,approve_status,register_amount,remark,employed_people,business_year,company_address_id,partner_count,pay_status,update_time,vendor_service_area_id,company_business_id,operator_approve_user_name,company_id,partner_years,create_time,register_finish_time,operator_approve_time,invest_condition,user_id,company_name,vendor_id,max_partner_count,operator_approve_user_id,order_id,secretary_approve_user_name,secretary_approve_time) 
        values(#{id},#{companyType},#{hasDirectorate},#{secretaryApproveUserId},#{approveStatus},#{registerAmount},#{remark},#{employedPeople},#{businessYear},#{companyAddressId},#{partnerCount},#{payStatus},#{updateTime},#{vendorServiceAreaId},#{companyBusinessId},#{operatorApproveUserName},#{companyId},#{partnerYears},#{createTime},#{registerFinishTime},#{operatorApproveTime},#{investCondition},#{userId},#{companyName},#{vendorId},#{maxPartnerCount},#{operatorApproveUserId},#{orderId},#{secretaryApproveUserName},#{secretaryApproveTime})
    </insert>

    <!-- 将RegisterCompany中属性值不为null的数据,插入到对应数据库的表中-->
    <insert id="insertNonEmptyRegisterCompany" parameterType="com.yingjun.ssm.entity.RegisterCompany">
        insert into t_register_company
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">id,</if>
            <if test="companyType != null">company_type,</if>
            <if test="hasDirectorate != null">hasDirectorate,</if>
            <if test="secretaryApproveUserId != null">secretary_approve_user_id,</if>
            <if test="approveStatus != null">approve_status,</if>
            <if test="registerAmount != null">register_amount,</if>
            <if test="remark != null">remark,</if>
            <if test="employedPeople != null">employed_people,</if>
            <if test="businessYear != null">business_year,</if>
            <if test="companyAddressId != null">company_address_id,</if>
            <if test="partnerCount != null">partner_count,</if>
            <if test="payStatus != null">pay_status,</if>
            <if test="updateTime != null">update_time,</if>
            <if test="vendorServiceAreaId != null">vendor_service_area_id,</if>
            <if test="companyBusinessId != null">company_business_id,</if>
            <if test="operatorApproveUserName != null">operator_approve_user_name,</if>
            <if test="companyId != null">company_id,</if>
            <if test="partnerYears != null">partner_years,</if>
            <if test="createTime != null">create_time,</if>
            <if test="registerFinishTime != null">register_finish_time,</if>
            <if test="operatorApproveTime != null">operator_approve_time,</if>
            <if test="investCondition != null">invest_condition,</if>
            <if test="userId != null">user_id,</if>
            <if test="companyName != null">company_name,</if>
            <if test="vendorId != null">vendor_id,</if>
            <if test="maxPartnerCount != null">max_partner_count,</if>
            <if test="operatorApproveUserId != null">operator_approve_user_id,</if>
            <if test="orderId != null">order_id,</if>
            <if test="secretaryApproveUserName != null">secretary_approve_user_name,</if>
            <if test="secretaryApproveTime != null">secretary_approve_time,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null"> #{id},</if>
            <if test="companyType != null"> #{companyType},</if>
            <if test="hasDirectorate != null"> #{hasDirectorate},</if>
            <if test="secretaryApproveUserId != null"> #{secretaryApproveUserId},</if>
            <if test="approveStatus != null"> #{approveStatus},</if>
            <if test="registerAmount != null"> #{registerAmount},</if>
            <if test="remark != null"> #{remark},</if>
            <if test="employedPeople != null"> #{employedPeople},</if>
            <if test="businessYear != null"> #{businessYear},</if>
            <if test="companyAddressId != null"> #{companyAddressId},</if>
            <if test="partnerCount != null"> #{partnerCount},</if>
            <if test="payStatus != null"> #{payStatus},</if>
            <if test="updateTime != null"> #{updateTime},</if>
            <if test="vendorServiceAreaId != null"> #{vendorServiceAreaId},</if>
            <if test="companyBusinessId != null"> #{companyBusinessId},</if>
            <if test="operatorApproveUserName != null"> #{operatorApproveUserName},</if>
            <if test="companyId != null"> #{companyId},</if>
            <if test="partnerYears != null"> #{partnerYears},</if>
            <if test="createTime != null"> #{createTime},</if>
            <if test="registerFinishTime != null"> #{registerFinishTime},</if>
            <if test="operatorApproveTime != null"> #{operatorApproveTime},</if>
            <if test="investCondition != null"> #{investCondition},</if>
            <if test="userId != null"> #{userId},</if>
            <if test="companyName != null"> #{companyName},</if>
            <if test="vendorId != null"> #{vendorId},</if>
            <if test="maxPartnerCount != null"> #{maxPartnerCount},</if>
            <if test="operatorApproveUserId != null"> #{operatorApproveUserId},</if>
            <if test="orderId != null"> #{orderId},</if>
            <if test="secretaryApproveUserName != null"> #{secretaryApproveUserName},</if>
            <if test="secretaryApproveTime != null"> #{secretaryApproveTime},</if>
        </trim>
    </insert>

    <!-- 将RegisterCompany批量插入到对应数据库的表中-->
    <insert id="insertRegisterCompanyByBatch" parameterType="ArrayList">
        insert into t_register_company(id,company_type,hasDirectorate,secretary_approve_user_id,approve_status,register_amount,remark,employed_people,business_year,company_address_id,partner_count,pay_status,update_time,vendor_service_area_id,company_business_id,operator_approve_user_name,company_id,partner_years,create_time,register_finish_time,operator_approve_time,invest_condition,user_id,company_name,vendor_id,max_partner_count,operator_approve_user_id,order_id,secretary_approve_user_name,secretary_approve_time) values
        <foreach collection="list" item="item" index="index" separator="," >
            (#{item.id},#{item.companyType},#{item.hasDirectorate},#{item.secretaryApproveUserId},#{item.approveStatus},#{item.registerAmount},#{item.remark},#{item.employedPeople},#{item.businessYear},#{item.companyAddressId},#{item.partnerCount},#{item.payStatus},#{item.updateTime},#{item.vendorServiceAreaId},#{item.companyBusinessId},#{item.operatorApproveUserName},#{item.companyId},#{item.partnerYears},#{item.createTime},#{item.registerFinishTime},#{item.operatorApproveTime},#{item.investCondition},#{item.userId},#{item.companyName},#{item.vendorId},#{item.maxPartnerCount},#{item.operatorApproveUserId},#{item.orderId},#{item.secretaryApproveUserName},#{item.secretaryApproveTime})
        </foreach>
    </insert>

    <!-- 通过RegisterCompany的id将数据库表中对应的数据删除-->
    <delete id="deleteRegisterCompanyById" parameterType="java.lang.Long">
        delete from t_register_company
        where id = #{id}
    </delete>

    <!-- 通过RegisterCompany的id将RegisterCompany的数据更新到数据库中对应的表,包括值null的数据-->
    <update id="updateRegisterCompanyById" parameterType="com.yingjun.ssm.entity.RegisterCompany">
        update t_register_company set
            company_type=#{companyType}
            ,hasDirectorate=#{hasDirectorate}
            ,secretary_approve_user_id=#{secretaryApproveUserId}
            ,approve_status=#{approveStatus}
            ,register_amount=#{registerAmount}
            ,remark=#{remark}
            ,employed_people=#{employedPeople}
            ,business_year=#{businessYear}
            ,company_address_id=#{companyAddressId}
            ,partner_count=#{partnerCount}
            ,pay_status=#{payStatus}
            ,update_time=#{updateTime}
            ,vendor_service_area_id=#{vendorServiceAreaId}
            ,company_business_id=#{companyBusinessId}
            ,operator_approve_user_name=#{operatorApproveUserName}
            ,company_id=#{companyId}
            ,partner_years=#{partnerYears}
            ,create_time=#{createTime}
            ,register_finish_time=#{registerFinishTime}
            ,operator_approve_time=#{operatorApproveTime}
            ,invest_condition=#{investCondition}
            ,user_id=#{userId}
            ,company_name=#{companyName}
            ,vendor_id=#{vendorId}
            ,max_partner_count=#{maxPartnerCount}
            ,operator_approve_user_id=#{operatorApproveUserId}
            ,order_id=#{orderId}
            ,secretary_approve_user_name=#{secretaryApproveUserName}
            ,secretary_approve_time=#{secretaryApproveTime}
        where id=#{id}
    </update>

    <!-- 通过RegisterCompany的id将RegisterCompany中属性值不为null的数据更新到数据库对应的表中-->
    <update id="updateNonEmptyRegisterCompanyById" parameterType="com.yingjun.ssm.entity.RegisterCompany">
        update t_register_company
        <set>
            <if test="companyType != null">
                company_type=#{companyType},
            </if>
            <if test="hasDirectorate != null">
                hasDirectorate=#{hasDirectorate},
            </if>
            <if test="secretaryApproveUserId != null">
                secretary_approve_user_id=#{secretaryApproveUserId},
            </if>
            <if test="approveStatus != null">
                approve_status=#{approveStatus},
            </if>
            <if test="registerAmount != null">
                register_amount=#{registerAmount},
            </if>
            <if test="remark != null">
                remark=#{remark},
            </if>
            <if test="employedPeople != null">
                employed_people=#{employedPeople},
            </if>
            <if test="businessYear != null">
                business_year=#{businessYear},
            </if>
            <if test="companyAddressId != null">
                company_address_id=#{companyAddressId},
            </if>
            <if test="partnerCount != null">
                partner_count=#{partnerCount},
            </if>
            <if test="payStatus != null">
                pay_status=#{payStatus},
            </if>
            <if test="updateTime != null">
                update_time=#{updateTime},
            </if>
            <if test="vendorServiceAreaId != null">
                vendor_service_area_id=#{vendorServiceAreaId},
            </if>
            <if test="companyBusinessId != null">
                company_business_id=#{companyBusinessId},
            </if>
            <if test="operatorApproveUserName != null">
                operator_approve_user_name=#{operatorApproveUserName},
            </if>
            <if test="companyId != null">
                company_id=#{companyId},
            </if>
            <if test="partnerYears != null">
                partner_years=#{partnerYears},
            </if>
            <if test="createTime != null">
                create_time=#{createTime},
            </if>
            <if test="registerFinishTime != null">
                register_finish_time=#{registerFinishTime},
            </if>
            <if test="operatorApproveTime != null">
                operator_approve_time=#{operatorApproveTime},
            </if>
            <if test="investCondition != null">
                invest_condition=#{investCondition},
            </if>
            <if test="userId != null">
                user_id=#{userId},
            </if>
            <if test="companyName != null">
                company_name=#{companyName},
            </if>
            <if test="vendorId != null">
                vendor_id=#{vendorId},
            </if>
            <if test="maxPartnerCount != null">
                max_partner_count=#{maxPartnerCount},
            </if>
            <if test="operatorApproveUserId != null">
                operator_approve_user_id=#{operatorApproveUserId},
            </if>
            <if test="orderId != null">
                order_id=#{orderId},
            </if>
            <if test="secretaryApproveUserName != null">
                secretary_approve_user_name=#{secretaryApproveUserName},
            </if>
            <if test="secretaryApproveTime != null">
                secretary_approve_time=#{secretaryApproveTime},
            </if>
        </set>
        where id=#{id}
    </update>


    <!-- 有限公司注册-->
    <insert id="insertLimitCompanyInfo" parameterType="com.yingjun.ssm.entity.RegisterCompany">
        insert into t_register_company
        (id,
        company_type,
        register_area,
        company_name,
        register_amount,
        business_scope,
        user_id)
        values
        (#{id},
        1,
        #{registerArea},
        #{companyName},
        #{registerAmount},
        #{businessScope},
        #{userId})
    </insert>

    <!-- 获得一个RegisterCompany对象,以参数RegisterCompany对象中不为空的属性作为条件进行查询-->
    <select id="checkCompanyNameRepeat" resultType="java.lang.Integer">
        select count(*)
        from t_register_company
        where
        company_name = #{companyName}
    </select>

    <!-- 通过公司名称查询注册公司信息-->
    <select id="selectRegisterCompanyByName" resultType="com.yingjun.ssm.entity.RegisterCompany">
        select
        id as id
        from t_register_company
        where
        company_name = #{companyName}
    </select>
    <!-- 个人独资公司注册-->
    <insert id="insertIndividualCompanyInfo" parameterType="com.yingjun.ssm.entity.RegisterCompany">
        insert into t_register_company
        (id,
        company_type,
        register_area,
        company_name,
        register_amount,
        business_scope,
        user_id)
        values
        (#{id},
        2,
        #{registerArea},
        #{companyName},
        #{registerAmount},
        #{businessScope},
        #{userId})
    </insert>

    <!-- 合伙企业公司注册-->
    <insert id="insertPartnerCompanyInfo" parameterType="com.yingjun.ssm.entity.PartnerCompany">
        insert into t_register_company
        (id,
        company_type,
        register_area,
        company_name,
        register_amount,
        business_scope,
        user_id
        )
        values
        (#{id},
        3,
        #{registerArea},
        #{companyName},
        #{registerAmount},
        #{businessScope},
        #{userId})
    </insert>


    <!--通过公司名称 或者公司类型查询公司信息 -->
    <select id="searchCompanysListByCondition" resultType="com.yingjun.ssm.entity.RegisterCompany">
        select company_name
        from t_register_company
        <where>
            <if test="companyName != null and companyName!=''"> and t_register_company.company_name = #{companyName}</if>
            <if test="companyType != null and companyType!=0"> and t_register_company.company_type = #{companyType}</if>
        </where>
    </select>
    <!--通过公司名称 或者公司类型查询公司信息 并且加入分页信息 -->
    <select id="searchCompanysListByConditionLimit" resultType="com.yingjun.ssm.entity.RegisterCompany">
        select
        id as id,
        company_type as companyType,
        register_amount as registerAmount,
        company_name as companyName
        from t_register_company
        <where>
            <if test="companyName != null and companyName!=''"> and t_register_company.company_name = #{companyName}</if>
            <if test="companyType != null and companyType!=0"> and t_register_company.company_type = #{companyType}</if>
        </where>
        limit #{start},#{end}
    </select>

    <!--通过公司id查询公司信息 -->
    <select id="searchCompanysListByConditionLimit" resultType="com.yingjun.ssm.entity.RegisterCompany">
        select
        id as id,
        company_type as companyType,
        register_amount as registerAmount,
        company_name as companyName
        from t_register_company
       where
       t_register_company.company_id = #{companyId}
    </select>

    <!--通过公司id查询有限公司员工信息 -->
    <select id="queryLimitCompanyEmployeeInfoByCompanyId" resultType="com.yingjun.ssm.entity.CompanyEmployeeAudit">
        select
        name as id,
        company_type as companyType,
        identity_id as registerAmount,
        address as registerAmount,
        real_pay as registerAmount,
        confirm_pay as registerAmount,
        pay_way as registerAmount,
        phone_number as companyName,
        status as status
        from t_company_employee
        where
        t_company_employee.company_id = #{companyId}
    </select>
</mapper>